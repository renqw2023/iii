wo'yiwoyiwo'yiwoyi# 端口配置更新日志

## 📅 更新时间
2024年12月19日

## 🎯 更新目标
将前后端端口从常用端口更改为不常用端口，避免与现有服务冲突：
- 前端端口：3000 → 3100
- 后端端口：5000 → 5500

## 📝 修改文件清单

### 1. 服务器端配置
- ✅ `server/.env` - 更新 CLIENT_URL 为 http://localhost:3100
- ✅ `server/.env` - PORT 已设置为 5500

### 2. 客户端配置
- ✅ `client/.env` - 更新 REACT_APP_API_URL 为 http://localhost:5500/api
- ✅ `client/package.json` - 更新 start 脚本设置 PORT=3100
- ✅ `client/package.json` - 更新 proxy 为 http://localhost:5500

### 3. 部署配置
- ✅ `ecosystem.config.js` - 更新所有环境的 PORT 为 5500
- ✅ `deploy-debian.sh` - 更新 SERVER_PORT 为 5500
- ✅ `DEBIAN_DEPLOYMENT_GUIDE.md` - 更新文档中的端口配置

### 4. 启动脚本
- ✅ `start-client-only.bat` - 更新端口提示信息
- ✅ `start-server-only.bat` - 更新端口提示信息
- ✅ `start-dev.bat` - 更新服务信息显示

## 🔧 技术细节

### Windows 环境兼容性
- 客户端启动脚本使用 `set PORT=3100 && react-scripts start` 语法
- 确保在 Windows 环境下正确设置环境变量

### 生产环境配置
- 生产环境配置文件 `.env.production` 保持不变（使用域名）
- PM2 配置文件已更新为新端口
- Nginx 反向代理配置已更新

## 🚀 启动方式

### 开发环境
```bash
# 同时启动前后端
npm run dev

# 仅启动前端（端口 3100）
npm run client

# 仅启动后端（端口 5500）
npm run server
```

### Windows 批处理
```cmd
# 开发环境
start-dev.bat

# 仅前端
start-client-only.bat

# 仅后端
start-server-only.bat
```

## 📋 验证清单

- [ ] 前端能在 http://localhost:3100 正常访问
- [ ] 后端 API 在 http://localhost:5500 正常响应
- [ ] 前端能正确调用后端 API
- [ ] 管理员面板在 http://localhost:3100/admin 正常工作
- [ ] 生产环境部署脚本能正确使用新端口

## 🔍 注意事项

1. **开发环境**：确保没有其他服务占用 3100 和 5500 端口
2. **生产环境**：部署时会自动使用新的端口配置
3. **防火墙**：如需外部访问，请开放相应端口
4. **代理配置**：客户端的 proxy 配置已更新，开发时 API 请求会正确代理

## 🎉 更新完成

所有相关配置文件已更新完成，新的端口配置：
- **前端开发服务器**：http://localhost:3100
- **后端 API 服务器**：http://localhost:5500
- **管理员面板**：http://localhost:3100/admin

现在可以使用新的端口配置启动应用，避免与现有服务的端口冲突。