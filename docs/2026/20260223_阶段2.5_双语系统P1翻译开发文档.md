# 阶段 2.5 — 双语系统 P1 翻译开发文档

> **日期**: 2026-02-23  
> **Git Commit**: `7edc4a7` feat(i18n): Phase C-P1  
> **开发阶段**: 双主题 + 多语言系统重构 — 阶段 C-P1（次要页面 i18n 集成）

---

## 1. 概述

本阶段完成了 P1 级别组件的国际化（i18n）集成工作，将残留的硬编码中文字符串替换为 `t()` 翻译调用，并补充了缺失的三语翻译键（英/中/日）。

### 变更范围

| 文件 | 变更类型 | 硬编码中文数 |
|------|----------|-------------|
| `Hero.js` | 修改 | ~335（alt texts + slogan + console） |
| `GalleryCard.js` | 修改 | 5（toast + title） |
| `VideoCard.js` | 修改 | 5（toast + title） |
| `gallery.js` (i18n module) | 修改 | +15 新键 |
| `seedance.js` (i18n module) | 修改 | +15 新键 |
| `home.js` (i18n module) | 修改 | +2 新键 |
| `en-US.json` (locale) | 修改 | +4 新键 |
| `zh-CN.json` (locale) | 修改 | +1 新键 |

### 未变更（已确认全部 i18n 完成）

| 文件 | 状态 | 说明 |
|------|------|------|
| `Login.js` | ✅ 无需修改 | 已完全使用 `t()` 调用 |
| `Register.js` | ✅ 无需修改 | 已完全使用 `t()` 调用 |
| `Explore.js` | ✅ 无需修改 | 已完全使用 `t()` 调用 |

---

## 2. 详细变更

### 2.1 Hero.js — 首页英雄区

**路径**: `client/src/components/Home/Hero.js`

#### 2.1.1 背景图片 alt 文本（330 项）

将 330 张背景图片的 `alt` 属性从中文改为英文：

```diff
- { id: 1, src: '/ImageFlow/01-(1).webp', alt: '艺术图片 1' },
+ { id: 1, src: '/ImageFlow/01-(1).webp', alt: 'Art' },

- { id: 234, src: '/ImageFlow/Gq6_erGXsAAHFYP.jpg', alt: 'JPG图片 234' },
+ { id: 234, src: '/ImageFlow/Gq6_erGXsAAHFYP.jpg', alt: 'Art' },
```

> **技术决策**: 使用 Python 脚本批量正则替换，避免 PowerShell 编码问题。alt 文本统一为 `'Art'`（装饰性背景图，SEO 影响极小）。

#### 2.1.2 品牌标语国际化

```diff
  <p className="text-lg sm:text-xl text-slate-500">
-   激发灵感 • 释放想象 • 推动创新
+   {t('home.hero.slogan')}
  </p>
```

#### 2.1.3 副标题 fallback 移除

```diff
- {t('home.hero.title', '专业AI视觉艺术平台')}
+ {t('home.hero.title')}

- {t('home.hero.subtitle', '汇聚全球创作者的精美作品...')}
+ {t('home.hero.subtitle')}
```

> **理由**: 既然 i18n 模块已有完整翻译，硬编码 fallback 不再需要，且会导致翻译不一致。

#### 2.1.4 Console 日志英文化

```diff
- console.log(`创建了 ${columns.length} 列，每列 ${columns[0]?.length || 0} 张图片`);
+ console.log(`Created ${columns.length} columns, ${columns[0]?.length || 0} images per column`);

- console.warn(`背景图片加载失败: ${image.src}`);
+ console.warn(`Background image load failed: ${image.src}`);
```

---

### 2.2 GalleryCard.js — 画廊卡片组件

**路径**: `client/src/components/Gallery/GalleryCard.js`

添加 `useTranslation` hook 并替换所有硬编码中文：

```diff
+ import { useTranslation } from 'react-i18next';

  const GalleryCard = ({ prompt, onLike, onFavorite }) => {
      const navigate = useNavigate();
+     const { t } = useTranslation();

-     toast.success('提示词已复制！');
+     toast.success(t('gallery.actions.copySuccess'));

-     toast.error('复制失败');
+     toast.error(t('gallery.actions.copyFailed'));

-     title="复制提示词"
+     title={t('gallery.actions.copy')}

-     title="点赞"
+     title={t('gallery.actions.like')}

-     title="收藏"
+     title={t('gallery.actions.favorite')}
```

---

### 2.3 VideoCard.js — 视频卡片组件

**路径**: `client/src/components/Seedance/VideoCard.js`

变更模式与 GalleryCard.js 完全一致：

```diff
+ import { useTranslation } from 'react-i18next';
+     const { t } = useTranslation();

- toast.success('提示词已复制！');
+ toast.success(t('seedance.actions.copySuccess'));

- title="复制提示词"
+ title={t('seedance.actions.copy')}
```

---

### 2.4 i18n 模块新增键

#### gallery.js — 新增 `actions` 节

```javascript
// 三语均已添加
actions: {
    copy: 'Copy prompt',           // 复制提示词 / プロンプトをコピー
    copySuccess: 'Prompt copied!', // 提示词已复制！ / プロンプトをコピーしました！
    copyFailed: 'Copy failed',     // 复制失败 / コピーに失敗しました
    like: 'Like',                  // 点赞 / いいね
    favorite: 'Favorite',          // 收藏 / お気に入り
}
```

#### seedance.js — 新增 `actions` 节

结构与 gallery.js 相同，但使用 `seedance.actions.*` 命名空间。

#### home.js — 新增 `hero.slogan`

```javascript
hero: {
    // ...existing keys
    slogan: "Inspire • Imagine • Innovate",  // zh: 激发灵感 • 释放想象 • 推动创新
}
```

#### en-US.json — 新增键

- `home.hero.slogan`: "Inspire • Imagine • Innovate"
- `register.login.text`: "Already have an account?"
- `register.login.link`: "Sign In Now"

#### zh-CN.json — 新增键

- `home.hero.slogan`: "激发灵感 • 释放想象 • 推动创新"

---

## 3. 已知问题

### 3.1 JSON 重复键警告（pre-existing）

`en-US.json` 和 `zh-CN.json` 的 `admin` 节存在重复键（`users`、`posts` 同时作为字符串值和对象出现）。这是历史遗留问题，不影响运行时行为（JSON 解析器取最后出现的值），计划在 P2 阶段统一修复。

---

## 4. 验证结果

| 验证项 | 状态 |
|--------|------|
| `npx react-scripts build` 编译 | ✅ 通过（exit code 0） |
| Hero.js 中文残留检查 | ✅ 0 处硬编码中文（注释除外） |
| GalleryCard.js 中文残留检查 | ✅ 0 处硬编码中文 |
| VideoCard.js 中文残留检查 | ✅ 0 处硬编码中文 |
| Login.js / Register.js / Explore.js | ✅ 已确认无需修改 |
| Git commit + push | ✅ 成功 (7edc4a7) |

---

## 5. 后续计划 — P2 翻译工作

P2 阶段将覆盖剩余的 Dashboard、Settings、Profile、Create、Admin 等页面，预计约 30-50 个文件。

### P2 优先级文件列表

| 优先级 | 组件/页面 | 预估硬编码数 |
|--------|-----------|-------------|
| 高 | Dashboard 相关组件 | ~15 |
| 高 | Settings / Profile | ~15 |
| 中 | Create 页面 | ~10 |
| 中 | Admin 后台 | ~20 |
| 低 | Error / NotFound / Help 等 | ~10 |
| 低 | JSON 重复键修复 | ~6 处 |
