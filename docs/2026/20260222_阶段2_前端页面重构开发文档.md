# 阶段 2 开发文档 — 前端页面重构

> 📅 时间: 2026-02-22 21:10  
> 🏷️ 版本: Phase 2  
> 📦 仓库: https://github.com/renqw2023/iii

---

## 一、概述

阶段 2 完成了前端的完整重构，新增了 **AI Prompts Gallery**（仿 meigen.ai 风格）和 **Seedance 2.0 Video Prompts** 两大板块，同时改版了导航系统。

---

## 二、新增文件清单

| 文件 | 用途 | 行数 |
|------|------|------|
| `client/src/services/galleryApi.js` | 画廊 API 服务 | ~55 |
| `client/src/services/seedanceApi.js` | Seedance API 服务 | ~50 |
| `client/src/components/Gallery/GalleryCard.js` | 画廊卡片组件 | ~120 |
| `client/src/components/Gallery/ModelFilter.js` | AI 模型过滤器 | ~32 |
| `client/src/components/Gallery/TagFilter.js` | 标签过滤器 | ~40 |
| `client/src/components/Seedance/VideoCard.js` | 视频卡片（Hover 播放） | ~150 |
| `client/src/pages/Gallery/GalleryList.js` | 画廊列表页 | ~200 |
| `client/src/pages/Gallery/GalleryDetail.js` | 画廊详情页 | ~220 |
| `client/src/pages/Seedance/SeedanceList.js` | Seedance 列表页 | ~200 |
| `client/src/pages/Seedance/SeedanceDetail.js` | Seedance 详情页 | ~200 |
| `client/src/styles/gallery.css` | 画廊/Seedance 全部样式 | ~530 |

## 三、修改文件清单

| 文件 | 变更 |
|------|------|
| `client/src/App.js` | +4 路由: `/gallery`, `/gallery/:id`, `/seedance`, `/seedance/:id` |
| `client/src/components/Layout/Header.js` | 导航栏新增 Gallery + Seedance 入口 |
| `client/src/index.css` | 引入 `gallery.css` |

---

## 四、核心特性说明

### 4.1 导航栏改版

导航顺序: **Home → Gallery → Seedance → MJ Prompts → Explore → (Auth items)**

- `Gallery` 带 `Image` 图标，链接到 `/gallery`
- `Seedance` 带 `Film` 图标，链接到 `/seedance`
- 原有 MJ Prompts 和 Explore 保持不变
- 移动端菜单同步更新

### 4.2 Gallery 画廊页（仿 meigen.ai）

**列表页功能:**
- 🔍 搜索栏 + Ctrl+K 快捷键 + 300ms 防抖
- 🤖 Model Filter: All / NanoBanana Pro / Midjourney / GPT Image
- 🏷️ Tag Filter: 横向滚动标签栏（Product/Photography/Food/3D/Portrait/Anime/Cinematic/Illustration/Sci-Fi等）
- 📊 排序: 最新 / 最热门 / 最多复制
- 📄 分页导航
- 🔗 URL 参数同步（筛选状态可被分享/书签）
- 🔄 react-query 做数据缓存，staleTime 30s

**卡片组件（GalleryCard）:**
- 4:3 预览图 + 懒加载
- Hover 显示操作层（复制/点赞/收藏按钮）
- 左上角模型标签（颜色编码: 黄色=NanoBanana, 蓝色=MJ, 绿色=GPT）
- 底部信息: 标题、提示词预览（2行截断）、作者、浏览/点赞统计

**详情页:**
- 左右分栏: 大图预览 + 信息区
- 一键复制按钮 + 提示词文本框
- 点赞/收藏/分享操作
- 相关推荐（同模型+同分类 或 共享标签）

### 4.3 Seedance 视频板块

**VideoCard 组件核心技术:**
- `IntersectionObserver` 实现视口检测 → 只在可见区域内加载视频
- `onMouseEnter/Leave` 控制 hover 自动播放/暂停
- 视频 `muted + loop + playsInline` 确保自动播放兼容
- 16:9 宽屏比例

**列表页:**
- 分类从 API 动态加载（`/api/seedance/categories`）
- 同样支持搜索/排序/分页

**详情页:**
- 全宽视频播放器（autoPlay + controls）
- 与 Gallery 详情页同样的复制/互动/推荐功能

### 4.4 CSS 设计系统

所有新样式使用 **CSS 变量** + **暗色主题优先**:

```css
--bg-secondary: rgba(255,255,255,0.05);
--border-color: rgba(255,255,255,0.06);
--text-primary: #f1f5f9;
--text-secondary: #94a3b8;
--text-tertiary: #64748b;
```

**响应式断点:**
- 768px: 单列详情、横滚过滤器
- 480px: 隐藏提示词预览文本、2列卡片网格

---

## 五、权限设计

| 操作 | 登录要求 |
|------|---------|
| 浏览列表/详情 | ❌ 不需要 |
| 搜索/筛选 | ❌ 不需要 |
| 复制提示词 | ❌ 不需要 |
| 点赞 | ✅ 需要登录 |
| 收藏 | ✅ 需要登录 |

---

## 六、下一步

> **阶段 3**: UI 风格统一与打磨
> - 统一 Design Token 与暗色模式
> - 响应式适配优化
> - 性能优化（图片懒加载、组件虚拟化）
