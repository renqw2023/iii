# MJ Gallery - Midjourneyé£æ ¼å‚æ•°å±•ç¤ºç½‘ç«™

ä¸€ä¸ªä¸“é—¨ç”¨æ¥å±•ç¤ºMidjourneyé£æ ¼å‚æ•°çš„ç²¾ç¾ç½‘ç«™ï¼Œè®©æ¯ä¸ªé£æ ¼å‚æ•°éƒ½æˆä¸ºåˆ›ä½œçš„çµæ„Ÿæºæ³‰ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¨ æ ¸å¿ƒåŠŸèƒ½
- **é£æ ¼å‚æ•°å±•ç¤º**: ä¸“é—¨å±•ç¤º `--sref 3311400918` ç­‰Midjourneyé£æ ¼å‚æ•°
- **åª’ä½“ä¸Šä¼ **: æ”¯æŒå›¾ç‰‡å’Œè§†é¢‘ä¸Šä¼ å±•ç¤º
- **å‚æ•°å¤åˆ¶**: ä¸€é”®å¤åˆ¶é£æ ¼å‚æ•°åˆ°å‰ªè´´æ¿
- **ç²¾ç¾UI**: ç°ä»£åŒ–è®¾è®¡å’Œæµç•…çš„äº¤äº’åŠ¨æ•ˆ

### ğŸ‘¥ ç¤¾äº¤åŠŸèƒ½
- **ç”¨æˆ·ç³»ç»Ÿ**: å®Œæ•´çš„æ³¨å†Œ/ç™»å½•/ä¸ªäººä¸­å¿ƒ
- **ç¤¾äº¤äº’åŠ¨**: ç‚¹èµã€æ”¶è—ã€è¯„è®ºã€åˆ†äº«
- **å…³æ³¨ç³»ç»Ÿ**: å…³æ³¨å…¶ä»–ç”¨æˆ·ï¼ŒæŸ¥çœ‹ç²‰ä¸åˆ—è¡¨
- **ä¸ªäººç»Ÿè®¡**: è¯¦ç»†çš„æ•°æ®å±•ç¤ºå’Œåˆ†æ

### ğŸ› ï¸ ç®¡ç†åŠŸèƒ½
- **ç®¡ç†å‘˜åå°**: ç”¨æˆ·ç®¡ç†ã€å†…å®¹ç®¡ç†ã€æ•°æ®ç»Ÿè®¡
- **å†…å®¹å®¡æ ¸**: å¸–å­çŠ¶æ€ç®¡ç†ã€ç²¾é€‰æ¨è
- **ç³»ç»Ÿç›‘æ§**: å®æ—¶æ•°æ®ç»Ÿè®¡å’Œç”¨æˆ·æ´»åŠ¨ç›‘æ§

## ğŸš€ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **React 18** - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- **Tailwind CSS** - åŸå­åŒ–CSSæ¡†æ¶
- **Framer Motion** - æµç•…çš„åŠ¨ç”»æ•ˆæœ
- **React Query** - æ•°æ®çŠ¶æ€ç®¡ç†
- **React Router** - è·¯ç”±ç®¡ç†
- **React Hook Form** - è¡¨å•å¤„ç†
- **React Dropzone** - æ–‡ä»¶ä¸Šä¼ 

### åç«¯æŠ€æœ¯
- **Node.js** - æœåŠ¡å™¨è¿è¡Œç¯å¢ƒ
- **Express** - Webåº”ç”¨æ¡†æ¶
- **MongoDB** - NoSQLæ•°æ®åº“
- **Mongoose** - MongoDBå¯¹è±¡å»ºæ¨¡
- **JWT** - èº«ä»½éªŒè¯
- **Multer** - æ–‡ä»¶ä¸Šä¼ å¤„ç†
- **Bcrypt** - å¯†ç åŠ å¯†

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- MongoDB >= 4.4.0
- npm >= 8.0.0

### âš™ï¸ é…ç½®ç®¡ç†

æœ¬é¡¹ç›®é‡‡ç”¨ç»Ÿä¸€çš„é…ç½®ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒäº¤äº’å¼é…ç½®ç”Ÿæˆå’Œè‡ªåŠ¨éªŒè¯ã€‚

#### å¿«é€Ÿé…ç½®
```bash
# 1. ç”ŸæˆæœåŠ¡å™¨é…ç½®
cd server
npm run generate-config

# 2. ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®
cd ../client
npm run generate-config

# 3. éªŒè¯é…ç½®
cd ../server
npm run validate-config
```

#### ä¸€é”®é…ç½®è®¾ç½®
```bash
cd server
npm run setup-config
```

> ğŸ“– è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ [CONFIG.md](./CONFIG.md)

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd midjourney-gallery
```

### 2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆå‰ç«¯+åç«¯ï¼‰
npm run install-all
```

#### ğŸš¨ ä¾èµ–å®‰è£…æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°TypeScriptç‰ˆæœ¬å†²çªé”™è¯¯ï¼ˆç‰¹åˆ«æ˜¯åœ¨æœåŠ¡å™¨éƒ¨ç½²æ—¶ï¼‰ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š

**Windowsç¯å¢ƒï¼š**
```cmd
fix-server-dependencies.bat
```

**Linux/Macç¯å¢ƒï¼š**
```bash
chmod +x fix-server-dependencies.sh
./fix-server-dependencies.sh
```

**æ‰‹åŠ¨ä¿®å¤ï¼š**
```bash
# æ¸…ç†ä¾èµ–
rm -rf node_modules package-lock.json
rm -rf server/node_modules server/package-lock.json
rm -rf client/node_modules client/package-lock.json

# é‡æ–°å®‰è£…
npm cache clean --force
npm install
cd server && npm install && cd ..
cd client && npm install --legacy-peer-deps && cd ..
```

#### ğŸš¨ AJV æ„å»ºé”™è¯¯ä¿®å¤

å¦‚æœåœ¨æ„å»ºæ—¶é‡åˆ° `Cannot find module 'ajv/dist/compile/codegen'` é”™è¯¯ï¼š

**Windowsç¯å¢ƒï¼š**
```cmd
fix-ajv-build-error.bat
```

**Linux/Macç¯å¢ƒï¼š**
```bash
chmod +x fix-ajv-build-error.sh
./fix-ajv-build-error.sh
```

**æ‰‹åŠ¨ä¿®å¤ï¼š**
```bash
cd client
rm -rf node_modules package-lock.json
npm cache clean --force
npm install ajv@^6.12.6 --save-dev
npm install ajv-keywords@^3.5.2 --save-dev
npm install --legacy-peer-deps
npm run build
```

### 3. ç¯å¢ƒé…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
cp server/.env.example server/.env
cp client/.env.example client/.env

# ç¼–è¾‘ç¯å¢ƒå˜é‡ï¼ˆæ ¹æ®éœ€è¦ä¿®æ”¹ï¼‰
# server/.env - é…ç½®æ•°æ®åº“è¿æ¥ã€JWTå¯†é’¥ç­‰
# client/.env - é…ç½®APIåœ°å€ç­‰
```

### 4. æ•°æ®åº“åˆå§‹åŒ–
```bash
# åˆ›å»ºuploadsç›®å½•å’Œç®¡ç†å‘˜è´¦æˆ·
cd server
npm run setup
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

#### ğŸš€ å¯åŠ¨é€‰é¡¹

**å®Œæ•´å¯åŠ¨ï¼ˆæ¨èæ–°ç”¨æˆ·ï¼‰**
```bash
# å›åˆ°æ ¹ç›®å½•
cd ..

# åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯ï¼ˆåŒ…å«è™šæ‹Ÿæ•°æ®ï¼‰
npm run start

# æˆ–è€…å¯åŠ¨ä½†ä¸åˆ›å»ºè™šæ‹Ÿæ•°æ®
npm run start-clean
```

**åˆ†ç¦»å¯åŠ¨ï¼ˆä¾¿äºè°ƒè¯•ï¼‰**
```bash
# ä»…å¯åŠ¨åç«¯æœåŠ¡å™¨
npm run server-only
# æˆ–åŒå‡» start-server-only.bat

# ä»…å¯åŠ¨å‰ç«¯åº”ç”¨ï¼ˆéœ€åœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
npm run client-only
# æˆ–åŒå‡» start-client-only.bat

# åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
npm run dev
```

### 6. è®¿é—®åº”ç”¨
- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **åç«¯API**: http://localhost:5000
- **ç®¡ç†å‘˜é¢æ¿**: http://localhost:3000/admin

### é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·
- **ç”¨æˆ·å**: admin
- **é‚®ç®±**: admin@example.com  
- **å¯†ç **: admin123456

âš ï¸ **è¯·åœ¨é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼**

## ğŸ“ é¡¹ç›®ç»“æ„

```
midjourney-gallery/
â”œâ”€â”€ client/                 # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ public/            # é™æ€èµ„æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/      # React Context
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ styles/        # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tailwind.config.js
â”œâ”€â”€ server/                # Node.jsåç«¯API
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routes/           # APIè·¯ç”±
â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ scripts/          # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ uploads/          # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ package.json          # æ ¹ç›®å½•é…ç½®
â””â”€â”€ README.md
```

## ğŸ”§ å¼€å‘æŒ‡å—

### å¯ç”¨è„šæœ¬

#### æ ¹ç›®å½•
```bash
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå‰ç«¯+åç«¯ï¼‰
npm run start            # å®Œæ•´å¯åŠ¨ï¼ˆå«è™šæ‹Ÿæ•°æ®ï¼‰
npm run start-clean      # å®Œæ•´å¯åŠ¨ï¼ˆæ— è™šæ‹Ÿæ•°æ®ï¼‰
npm run server-only      # ä»…å¯åŠ¨åç«¯æœåŠ¡å™¨
npm run client-only      # ä»…å¯åŠ¨å‰ç«¯åº”ç”¨
npm run build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run install-all      # å®‰è£…æ‰€æœ‰ä¾èµ–
npm run setup            # åŸºç¡€åˆå§‹åŒ–ï¼ˆæ— è™šæ‹Ÿæ•°æ®ï¼‰
npm run setup-with-data  # å®Œæ•´åˆå§‹åŒ–ï¼ˆå«è™šæ‹Ÿæ•°æ®ï¼‰
```

#### æœåŠ¡å™¨ç«¯ (server/)
```bash
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run start            # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run create-admin     # åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
npm run init-uploads     # åˆå§‹åŒ–ä¸Šä¼ ç›®å½•
npm run setup            # åŸºç¡€åˆå§‹åŒ–ï¼ˆæ— è™šæ‹Ÿæ•°æ®ï¼‰
npm run setup-with-data  # å®Œæ•´åˆå§‹åŒ–ï¼ˆå«è™šæ‹Ÿæ•°æ®ï¼‰
npm run seed             # åˆ›å»ºè™šæ‹Ÿæ•°æ®
npm run create-sample    # åˆ›å»ºç¤ºä¾‹æ•°æ®
npm run generate-config  # ç”Ÿæˆé…ç½®æ–‡ä»¶
npm run validate-config  # éªŒè¯é…ç½®æ–‡ä»¶
```

#### å®¢æˆ·ç«¯ (client/)
```bash
npm start           # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build       # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm test            # è¿è¡Œæµ‹è¯•
```

### APIæ–‡æ¡£

#### è®¤è¯ç›¸å…³
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

#### å¸–å­ç›¸å…³
- `GET /api/posts` - è·å–å¸–å­åˆ—è¡¨
- `POST /api/posts` - åˆ›å»ºæ–°å¸–å­
- `GET /api/posts/:id` - è·å–å¸–å­è¯¦æƒ…
- `POST /api/posts/:id/like` - ç‚¹èµ/å–æ¶ˆç‚¹èµ
- `POST /api/posts/:id/comment` - æ·»åŠ è¯„è®º

#### ç”¨æˆ·ç›¸å…³
- `GET /api/users/:id` - è·å–ç”¨æˆ·èµ„æ–™
- `PUT /api/users/profile` - æ›´æ–°ç”¨æˆ·èµ„æ–™
- `POST /api/users/:id/follow` - å…³æ³¨/å–æ¶ˆå…³æ³¨ç”¨æˆ·

#### ç®¡ç†å‘˜ç›¸å…³
- `GET /api/admin/stats` - è·å–ç»Ÿè®¡æ•°æ®
- `GET /api/admin/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `GET /api/admin/posts` - è·å–å¸–å­åˆ—è¡¨

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§è¯¦è§£

### Midjourneyé£æ ¼å‚æ•°æ”¯æŒ
- `--sref` - é£æ ¼å‚è€ƒç¼–å·
- `--style` - é£æ ¼æ¨¡å¼ (raw, expressive, cute, scenic)
- `--stylize` - é£æ ¼åŒ–ç¨‹åº¦ (0-1000)
- `--chaos` - éšæœºæ€§ (0-100)
- `--ar` - å®½é«˜æ¯” (1:1, 16:9, 9:16ç­‰)
- `--v` - ç‰ˆæœ¬ (5, 5.1, 5.2, 6)
- `--q` - è´¨é‡ (0.25, 0.5, 1, 2)
- `--seed` - ç§å­å€¼
- è‡ªå®šä¹‰å‚æ•°æ”¯æŒ

### ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…ç§»åŠ¨ç«¯
- æµç•…çš„é¡µé¢åˆ‡æ¢åŠ¨ç”»
- å›¾ç‰‡æ‡’åŠ è½½å’Œä¼˜åŒ–
- å®æ—¶æœç´¢å’Œç­›é€‰
- æ— é™æ»šåŠ¨åŠ è½½

### å®‰å…¨ç‰¹æ€§
- JWTèº«ä»½éªŒè¯
- å¯†ç åŠ å¯†å­˜å‚¨
- æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶
- APIè¯·æ±‚é¢‘ç‡é™åˆ¶
- XSSå’ŒCSRFé˜²æŠ¤

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **æ„å»ºå‰ç«¯åº”ç”¨**
```bash
cd client
npm run build
```

2. **é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡**
```bash
# server/.env
NODE_ENV=production
MONGODB_URI=mongodb://your-production-db
JWT_SECRET=your-production-jwt-secret
```

3. **å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**
```bash
cd server
npm start
```

### Dockeréƒ¨ç½² (å¯é€‰)
```bash
# æ„å»ºé•œåƒ
docker build -t mj-gallery .

# è¿è¡Œå®¹å™¨
docker run -p 5000:5000 -e MONGODB_URI=your-db-url mj-gallery
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- [Midjourney](https://midjourney.com) - æä¾›äº†ä»¤äººæƒŠå¹çš„AIè‰ºæœ¯ç”Ÿæˆå·¥å…·
- [React](https://reactjs.org) - å¼ºå¤§çš„å‰ç«¯æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com) - ä¼˜ç§€çš„CSSæ¡†æ¶
- [Framer Motion](https://framer.com/motion) - æµç•…çš„åŠ¨ç”»åº“

## ğŸ“ æ”¯æŒ

å¦‚æœä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹ [Issues](../../issues) é¡µé¢
2. åˆ›å»ºæ–°çš„ Issue æè¿°é—®é¢˜
3. è”ç³»é¡¹ç›®ç»´æŠ¤è€…

---

**è®©æ¯ä¸ªMidjourneyé£æ ¼å‚æ•°éƒ½æˆä¸ºåˆ›ä½œçš„çµæ„Ÿæºæ³‰ï¼** âœ¨